function getTinyMCEContentOffsetShortCode(t,e){var o=getTinyMCECursorPosition(),n=t.getContent();return getShortCodeFromContentOffset(n,o,e)}function getTinyMCECursorPosition(){var t=tinyMCE.activeEditor,e=t.selection.getBookmark(0),o="[data-mce-type=bookmark]",n=t.dom.select(o);t.selection.select(n[0]),t.selection.collapse();var r="nt-tmce-bm-cursor",i='<span id="'+r+'"></span>';t.selection.setContent(i);var s=t.getContent({format:"html"}),l=s.indexOf(i);return t.dom.remove(r,!1),t.selection.moveToBookmark(e),l}function getShortCodeFromContentOffset(t,e,o){var n=t.slice(0,e),r=t.slice(e),i=n.lastIndexOf("["),s=r.indexOf("]");if(-1!==i&&-1!==s){console.log("---------------------"),console.log("started at ",e),console.log("[ at ",i),console.log("] at ",e+s+1),console.log("---------------------");var l=t.slice(i,e+s+1);return console.log(l),quix.shortcode.next(o,l)}return null}function getCurrentShortcodeItemId(){if(!tinyMCE)return null;var t=getTinyMCEContentOffsetShortCode(tinyMCE.activeEditor,"quix");return t?t.shortcode.attrs.named.id:null}